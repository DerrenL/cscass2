{"ast":null,"code":"import _slicedToArray from \"D:\\\\material-kit-react-master\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nimport _objectSpread from \"D:\\\\material-kit-react-master\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";\nimport _createForOfIteratorHelper from \"D:\\\\material-kit-react-master\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createForOfIteratorHelper\";\nimport _regeneratorRuntime from \"D:\\\\material-kit-react-master\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"D:\\\\material-kit-react-master\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\n\nvar _this = this,\n    _jsxFileName = \"D:\\\\material-kit-react-master\\\\src\\\\views\\\\Components\\\\Checkout.js\";\n\nimport React, { useEffect, useReducer } from 'react';\nimport { loadStripe } from '@stripe/stripe-js';\nimport Card from \"components/Card/Card.js\";\nimport CardHeader from \"components/Card/CardHeader.js\";\nimport CardBody from \"components/Card/CardBody.js\"; // @material-ui/core components\n\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\nimport Icon from \"@material-ui/core/Icon\"; // @material-ui/icons\n\nimport Email from \"@material-ui/icons/Email\";\nimport People from \"@material-ui/icons/People\"; // core components\n\nimport Header from \"components/Header/Header.js\";\nimport HeaderLinks from \"components/Header/HeaderLinks.js\";\nimport Footer from \"components/Footer/Footer.js\";\nimport GridContainer from \"components/Grid/GridContainer.js\";\nimport GridItem from \"components/Grid/GridItem.js\";\nimport Button from \"components/CustomButtons/Button.js\";\nimport CardFooter from \"components/Card/CardFooter.js\";\nimport CustomInput from \"components/CustomInput/CustomInput.js\";\nimport axios from 'axios';\nimport { useState } from 'react';\nimport styles from \"assets/jss/material-kit-react/views/loginPage.js\";\n\nvar fetchCheckoutSession = /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(_ref) {\n    var quantity;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            quantity = _ref.quantity;\n            return _context.abrupt(\"return\", fetch('/create-checkout-session', {\n              method: 'POST',\n              headers: {\n                'Content-Type': 'application/json'\n              },\n              body: JSON.stringify({\n                quantity: quantity\n              })\n            }).then(function (res) {\n              return res.json();\n            }));\n\n          case 2:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function fetchCheckoutSession(_x) {\n    return _ref2.apply(this, arguments);\n  };\n}();\n\nvar formatPrice = function formatPrice(_ref3) {\n  var amount = _ref3.amount,\n      currency = _ref3.currency,\n      quantity = _ref3.quantity;\n  var numberFormat = new Intl.NumberFormat('en-US', {\n    style: 'currency',\n    currency: currency,\n    currencyDisplay: 'symbol'\n  });\n  var parts = numberFormat.formatToParts(amount);\n  var zeroDecimalCurrency = true;\n\n  var _iterator = _createForOfIteratorHelper(parts),\n      _step;\n\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var part = _step.value;\n\n      if (part.type === 'decimal') {\n        zeroDecimalCurrency = false;\n      }\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n\n  amount = zeroDecimalCurrency ? amount : amount / 100;\n  var total = (quantity * amount).toFixed(2);\n  return numberFormat.format(total);\n};\n\nfunction reducer(state, action) {\n  switch (action.type) {\n    case 'useEffectUpdate':\n      return _objectSpread(_objectSpread(_objectSpread({}, state), action.payload), {}, {\n        price: formatPrice({\n          amount: action.payload.unitAmount,\n          currency: action.payload.currency,\n          quantity: state.quantity\n        })\n      });\n\n    case 'increment':\n      return _objectSpread(_objectSpread({}, state), {}, {\n        quantity: state.quantity + 1,\n        price: formatPrice({\n          amount: state.unitAmount,\n          currency: state.currency,\n          quantity: state.quantity + 1\n        })\n      });\n\n    case 'decrement':\n      return _objectSpread(_objectSpread({}, state), {}, {\n        quantity: state.quantity - 1,\n        price: formatPrice({\n          amount: state.unitAmount,\n          currency: state.currency,\n          quantity: state.quantity - 1\n        })\n      });\n\n    case 'setLoading':\n      return _objectSpread(_objectSpread({}, state), {}, {\n        loading: action.payload.loading\n      });\n\n    case 'setError':\n      return _objectSpread(_objectSpread({}, state), {}, {\n        error: action.payload.error\n      });\n\n    default:\n      throw new Error();\n  }\n}\n\nvar Checkout = function Checkout() {\n  var _state$error;\n\n  var useStyles = makeStyles(styles);\n  var classes = useStyles();\n\n  var _React$useState = React.useState(\"cardHidden\"),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      cardAnimaton = _React$useState2[0],\n      setCardAnimation = _React$useState2[1];\n\n  setTimeout(function () {\n    setCardAnimation(\"\");\n  }, 700);\n\n  var _useReducer = useReducer(reducer, {\n    quantity: 1,\n    price: null,\n    loading: false,\n    error: null,\n    stripe: null\n  }),\n      _useReducer2 = _slicedToArray(_useReducer, 2),\n      state = _useReducer2[0],\n      dispatch = _useReducer2[1];\n\n  useEffect(function () {\n    function fetchConfig() {\n      return _fetchConfig.apply(this, arguments);\n    }\n\n    function _fetchConfig() {\n      _fetchConfig = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n        var _yield$fetch$then, publicKey, unitAmount, currency;\n\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return fetch('/config').then(function (res) {\n                  return res.json();\n                });\n\n              case 2:\n                _yield$fetch$then = _context2.sent;\n                publicKey = _yield$fetch$then.publicKey;\n                unitAmount = _yield$fetch$then.unitAmount;\n                currency = _yield$fetch$then.currency;\n                _context2.t0 = dispatch;\n                _context2.t1 = unitAmount;\n                _context2.t2 = currency;\n                _context2.next = 11;\n                return loadStripe(publicKey);\n\n              case 11:\n                _context2.t3 = _context2.sent;\n                _context2.t4 = {\n                  unitAmount: _context2.t1,\n                  currency: _context2.t2,\n                  stripe: _context2.t3\n                };\n                _context2.t5 = {\n                  type: 'useEffectUpdate',\n                  payload: _context2.t4\n                };\n                (0, _context2.t0)(_context2.t5);\n\n              case 15:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n      return _fetchConfig.apply(this, arguments);\n    }\n\n    fetchConfig();\n  }, []);\n\n  var handleClick = /*#__PURE__*/function () {\n    var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(event) {\n      var _yield$fetchCheckoutS, sessionId, _yield$state$stripe$r, error;\n\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              // Call your backend to create the Checkout session.\n              dispatch({\n                type: 'setLoading',\n                payload: {\n                  loading: true\n                }\n              });\n              _context3.next = 3;\n              return fetchCheckoutSession({\n                quantity: state.quantity\n              });\n\n            case 3:\n              _yield$fetchCheckoutS = _context3.sent;\n              sessionId = _yield$fetchCheckoutS.sessionId;\n              _context3.next = 7;\n              return state.stripe.redirectToCheckout({\n                sessionId: sessionId\n              });\n\n            case 7:\n              _yield$state$stripe$r = _context3.sent;\n              error = _yield$state$stripe$r.error;\n\n              // If `redirectToCheckout` fails due to a browser or network\n              // error, display the localized error message to your customer\n              // using `error.message`.\n              if (error) {\n                dispatch({\n                  type: 'setError',\n                  payload: {\n                    error: error\n                  }\n                });\n                dispatch({\n                  type: 'setLoading',\n                  payload: {\n                    loading: false\n                  }\n                });\n              }\n\n            case 10:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    return function handleClick(_x2) {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(GridContainer, {\n    justify: \"center\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(GridItem, {\n    xs: 12,\n    sm: 12,\n    md: 12,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Card, {\n    className: classes[cardAnimaton],\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(CardHeader, {\n    color: \"primary\",\n    className: classes.cardHeader,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 21\n    }\n  }, \"Subscription Plan\")), /*#__PURE__*/React.createElement(CardBody, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 19\n    }\n  }, \"Subscribe now for only $1.00 daily!\"), /*#__PURE__*/React.createElement(CardFooter, {\n    className: classes.cardFooter,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    role: \"link\",\n    onClick: handleClick,\n    simple: true,\n    color: \"primary\",\n    size: \"lg\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 21\n    }\n  }, \"Subscribe\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"sr-field-error\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 21\n    }\n  }, (_state$error = state.error) === null || _state$error === void 0 ? void 0 : _state$error.message)))))) // <div className=\"sr-root\">\n  //   <div className=\"sr-main\">\n  //     <header className=\"sr-header\">\n  //       <div className=\"sr-header__logo\"></div>\n  //     </header>\n  //     <section className=\"container\">\n  //       {/* <div>\n  //         <h2>Subscription Plan</h2>\n  //         <h4>Subscribe now for only $1.00 daily!</h4>\n  //       </div>\n  //       <div className=\"quantity-setter\">\n  //       </div> */}\n  //       <button\n  //         role=\"link\"\n  //         onClick={handleClick}\n  //         disabled={!state.stripe || state.loading}\n  //       >\n  //         {state.loading || !state.price\n  //           ? `Loading...`\n  //           : `Buy for ${state.price}`}\n  //       </button>\n  //       <div className=\"sr-field-error\">{state.error?.message}</div>\n  //     </section>\n  //   </div>\n  // </div>\n  ;\n};\n\nexport default Checkout;","map":{"version":3,"sources":["D:/material-kit-react-master/src/views/Components/Checkout.js"],"names":["React","useEffect","useReducer","loadStripe","Card","CardHeader","CardBody","makeStyles","InputAdornment","Icon","Email","People","Header","HeaderLinks","Footer","GridContainer","GridItem","Button","CardFooter","CustomInput","axios","useState","styles","fetchCheckoutSession","quantity","fetch","method","headers","body","JSON","stringify","then","res","json","formatPrice","amount","currency","numberFormat","Intl","NumberFormat","style","currencyDisplay","parts","formatToParts","zeroDecimalCurrency","part","type","total","toFixed","format","reducer","state","action","payload","price","unitAmount","loading","error","Error","Checkout","useStyles","classes","cardAnimaton","setCardAnimation","setTimeout","stripe","dispatch","fetchConfig","publicKey","handleClick","event","sessionId","redirectToCheckout","cardHeader","cardFooter","message"],"mappings":"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","sourcesContent":["import React, { useEffect, useReducer } from 'react';\r\nimport { loadStripe } from '@stripe/stripe-js';\r\nimport Card from \"components/Card/Card.js\";\r\nimport CardHeader from \"components/Card/CardHeader.js\";\r\nimport CardBody from \"components/Card/CardBody.js\";\r\n// @material-ui/core components\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\r\nimport Icon from \"@material-ui/core/Icon\";\r\n// @material-ui/icons\r\nimport Email from \"@material-ui/icons/Email\";\r\nimport People from \"@material-ui/icons/People\";\r\n// core components\r\nimport Header from \"components/Header/Header.js\";\r\nimport HeaderLinks from \"components/Header/HeaderLinks.js\";\r\nimport Footer from \"components/Footer/Footer.js\";\r\nimport GridContainer from \"components/Grid/GridContainer.js\";\r\nimport GridItem from \"components/Grid/GridItem.js\";\r\nimport Button from \"components/CustomButtons/Button.js\";\r\nimport CardFooter from \"components/Card/CardFooter.js\";\r\nimport CustomInput from \"components/CustomInput/CustomInput.js\";\r\nimport axios from 'axios';\r\nimport { useState } from 'react';\r\n\r\nimport styles from \"assets/jss/material-kit-react/views/loginPage.js\";\r\n\r\n\r\n\r\n\r\nconst fetchCheckoutSession = async ({ quantity }) => {\r\n  return fetch('/create-checkout-session', {\r\n    method: 'POST',\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n    },\r\n    body: JSON.stringify({\r\n      quantity,\r\n    }),\r\n  }).then((res) => res.json());\r\n};\r\n\r\nconst formatPrice = ({ amount, currency, quantity }) => {\r\n  const numberFormat = new Intl.NumberFormat('en-US', {\r\n    style: 'currency',\r\n    currency,\r\n    currencyDisplay: 'symbol',\r\n  });\r\n  const parts = numberFormat.formatToParts(amount);\r\n  let zeroDecimalCurrency = true;\r\n  for (let part of parts) {\r\n    if (part.type === 'decimal') {\r\n      zeroDecimalCurrency = false;\r\n    }\r\n  }\r\n  amount = zeroDecimalCurrency ? amount : amount / 100;\r\n  const total = (quantity * amount).toFixed(2);\r\n  return numberFormat.format(total);\r\n};\r\n\r\nfunction reducer(state, action) {\r\n  switch (action.type) {\r\n    case 'useEffectUpdate':\r\n      return {\r\n        ...state,\r\n        ...action.payload,\r\n        price: formatPrice({\r\n          amount: action.payload.unitAmount,\r\n          currency: action.payload.currency,\r\n          quantity: state.quantity,\r\n        }),\r\n      };\r\n    case 'increment':\r\n      return {\r\n        ...state,\r\n        quantity: state.quantity + 1,\r\n        price: formatPrice({\r\n          amount: state.unitAmount,\r\n          currency: state.currency,\r\n          quantity: state.quantity + 1,\r\n        }),\r\n      };\r\n    case 'decrement':\r\n      return {\r\n        ...state,\r\n        quantity: state.quantity - 1,\r\n        price: formatPrice({\r\n          amount: state.unitAmount,\r\n          currency: state.currency,\r\n          quantity: state.quantity - 1,\r\n        }),\r\n      };\r\n    case 'setLoading':\r\n      return { ...state, loading: action.payload.loading };\r\n    case 'setError':\r\n      return { ...state, error: action.payload.error };\r\n    default:\r\n      throw new Error();\r\n  }\r\n}\r\n\r\nconst Checkout = () => {\r\n  const useStyles = makeStyles(styles);\r\nconst classes = useStyles();\r\nconst [cardAnimaton, setCardAnimation] = React.useState(\"cardHidden\");\r\nsetTimeout(function () {\r\n  setCardAnimation(\"\");\r\n}, 700);\r\n  const [state, dispatch] = useReducer(reducer, {\r\n    quantity: 1,\r\n    price: null,\r\n    loading: false,\r\n    error: null,\r\n    stripe: null,\r\n  });\r\n\r\n  useEffect(() => {\r\n    async function fetchConfig() {\r\n      // Fetch config from our backend.\r\n      const { publicKey, unitAmount, currency } = await fetch(\r\n        '/config'\r\n      ).then((res) => res.json());\r\n      // Make sure to call `loadStripe` outside of a component’s render to avoid\r\n      // recreating the `Stripe` object on every render.\r\n      dispatch({\r\n        type: 'useEffectUpdate',\r\n        payload: { unitAmount, currency, stripe: await loadStripe(publicKey) },\r\n      });\r\n    }\r\n    fetchConfig();\r\n  }, []);\r\n\r\n  const handleClick = async (event) => {\r\n    // Call your backend to create the Checkout session.\r\n    dispatch({ type: 'setLoading', payload: { loading: true } });\r\n    const { sessionId } = await fetchCheckoutSession({\r\n      quantity: state.quantity,\r\n    });\r\n    // When the customer clicks on the button, redirect them to Checkout.\r\n    const { error } = await state.stripe.redirectToCheckout({\r\n      sessionId,\r\n    });\r\n    // If `redirectToCheckout` fails due to a browser or network\r\n    // error, display the localized error message to your customer\r\n    // using `error.message`.\r\n    if (error) {\r\n      dispatch({ type: 'setError', payload: { error } });\r\n      dispatch({ type: 'setLoading', payload: { loading: false } });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n          <GridContainer justify=\"center\">\r\n            <GridItem xs={12} sm={12} md={12}>\r\n              <Card className={classes[cardAnimaton]}>\r\n                  <CardHeader color=\"primary\" className={classes.cardHeader}>\r\n                    <h4>Subscription Plan</h4>\r\n                  </CardHeader>\r\n                  <CardBody>\r\n                    Subscribe now for only $1.00 daily!\r\n                  </CardBody>\r\n                  <CardFooter className={classes.cardFooter}>\r\n                    <Button role=\"link\"\r\n                        onClick={handleClick}\r\n                         simple color=\"primary\" size=\"lg\" >\r\n                      Subscribe\r\n                    </Button>\r\n                    <div className=\"sr-field-error\">{state.error?.message}</div>\r\n                  </CardFooter>\r\n              </Card>\r\n            </GridItem>\r\n          </GridContainer>\r\n        </div>\r\n    // <div className=\"sr-root\">\r\n    //   <div className=\"sr-main\">\r\n    //     <header className=\"sr-header\">\r\n    //       <div className=\"sr-header__logo\"></div>\r\n    //     </header>\r\n    //     <section className=\"container\">\r\n          \r\n         \r\n    //       {/* <div>\r\n    //         <h2>Subscription Plan</h2>\r\n    //         <h4>Subscribe now for only $1.00 daily!</h4>\r\n    //       </div>\r\n    //       <div className=\"quantity-setter\">\r\n    //       </div> */}\r\n\r\n    //       <button\r\n    //         role=\"link\"\r\n    //         onClick={handleClick}\r\n    //         disabled={!state.stripe || state.loading}\r\n    //       >\r\n    //         {state.loading || !state.price\r\n    //           ? `Loading...`\r\n    //           : `Buy for ${state.price}`}\r\n    //       </button>\r\n    //       <div className=\"sr-field-error\">{state.error?.message}</div>\r\n    //     </section>\r\n    //   </div>\r\n    // </div>\r\n  );\r\n};\r\n\r\nexport default Checkout;\r\n"]},"metadata":{},"sourceType":"module"}