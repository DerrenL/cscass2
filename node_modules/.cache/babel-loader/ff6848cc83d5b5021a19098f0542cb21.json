{"ast":null,"code":"'use strict';\n\nvar _classCallCheck = require(\"D:\\\\material-kit-react-master\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"D:\\\\material-kit-react-master\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/createClass\");\n\nvar _inherits = require(\"D:\\\\material-kit-react-master\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/inherits\");\n\nvar _createSuper = require(\"D:\\\\material-kit-react-master\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/createSuper\");\n\nvar rqs = require(\"./request\");\n\nvar sum_timeouts = function sum_timeouts(requests) {\n  return requests.map(function (r) {\n    return r.timeout;\n  }).reduce(function (a, b) {\n    return a + b;\n  }, 0);\n};\n/**\n * In many cases, it may be desirable to execute multiple requests at once. For example, when synchronizing the catalog of items in a periodical manner, you would have to execute a sequence of thousands of separate POST requests, which is very ineffective and may take a very long time to complete. Most notably, network latencies can make execution of such sequence very slow and even if executed in multiple parallel threads, there will still be unreasonable overhead caused by the HTTP(s). To avoid the mentioned problems, batch processing may be used, encapsulating a sequence of requests into a single HTTPS request.\n * Batch processing allows you to submit arbitrary sequence of requests and the batch may combine different types of requests arbitrarily as well.\n * Note that the status code of the batch request itself is 200 even if the individual requests result in error – you have to inspect the code values in the resulting array.\n  */\n\n\nvar Batch = /*#__PURE__*/function (_rqs$Request) {\n  _inherits(Batch, _rqs$Request);\n\n  var _super = _createSuper(Batch);\n\n  /**\n   * Construct the request\n   * @param {Request[]} requests - Array containing the requests.\n   * @param {Object} optional - Optional parameters given as an object with structure name of the parameter: value\n   * - Allowed parameters:\n   *     - *distinctRecomms*\n   *         - Type: boolean\n   *         - Description: Makes all the recommended items for a certain user distinct among multiple recommendation requests in the batch.\n   */\n  function Batch(requests, optional) {\n    var _this;\n\n    _classCallCheck(this, Batch);\n\n    _this = _super.call(this, 'POST', '/batch/', sum_timeouts(requests), true);\n    _this.requests = requests;\n    optional = optional || {};\n    _this.distinctRecomms = optional.distinctRecomms;\n    return _this;\n  }\n  /**\n   * Get body parameters\n   * @return {Object} The values of body parameters (name of parameter: value of the parameter)\n   */\n\n\n  _createClass(Batch, [{\n    key: \"bodyParameters\",\n    value: function bodyParameters() {\n      var _this2 = this;\n\n      var reqs = this.requests.map(function (r) {\n        return _this2._request_to_batch_object(r);\n      });\n      var result = {\n        requests: reqs\n      };\n      if (this.distinctRecomms !== undefined) result.distinctRecomms = this.distinctRecomms;\n      return result;\n    }\n  }, {\n    key: \"_request_to_batch_object\",\n    value: function _request_to_batch_object(req) {\n      var bo = {\n        method: req.method,\n        path: req.path\n      };\n      var params = req.queryParameters();\n      var bodyParams = req.bodyParameters();\n\n      for (var attrname in bodyParams) {\n        params[attrname] = bodyParams[attrname];\n      }\n\n      if (Object.keys(params).length > 0) bo.params = params;\n      return bo;\n    }\n    /**\n     * Get query parameters\n     * @return {Object} The values of query parameters (name of parameter: value of the parameter)\n     */\n\n  }, {\n    key: \"queryParameters\",\n    value: function queryParameters() {\n      return {};\n    }\n  }]);\n\n  return Batch;\n}(rqs.Request);\n\nexports.Batch = Batch;","map":{"version":3,"sources":["D:/material-kit-react-master/node_modules/recombee-api-client/lib/requests/batch.js"],"names":["rqs","require","sum_timeouts","requests","map","r","timeout","reduce","a","b","Batch","optional","distinctRecomms","reqs","_request_to_batch_object","result","undefined","req","bo","method","path","params","queryParameters","bodyParams","bodyParameters","attrname","Object","keys","length","Request","exports"],"mappings":"AAAA;;;;;;;;;;AACA,IAAMA,GAAG,GAAGC,OAAO,CAAC,WAAD,CAAnB;;AAEA,IAAIC,YAAY,GAAI,SAAhBA,YAAgB,CAACC,QAAD,EAAc;AAChC,SAAOA,QAAQ,CAACC,GAAT,CAAa,UAACC,CAAD;AAAA,WAAOA,CAAC,CAACC,OAAT;AAAA,GAAb,EAA+BC,MAA/B,CAAsC,UAACC,CAAD,EAAIC,CAAJ;AAAA,WAAUD,CAAC,GAAGC,CAAd;AAAA,GAAtC,EAAuD,CAAvD,CAAP;AACD,CAFD;AAIA;;;;;;;IAKMC,K;;;;;AAEJ;;;;;;;;;AASA,iBAAYP,QAAZ,EAAsBQ,QAAtB,EAAgC;AAAA;;AAAA;;AAC9B,8BAAM,MAAN,EAAc,SAAd,EAAyBT,YAAY,CAACC,QAAD,CAArC,EAAiD,IAAjD;AACA,UAAKA,QAAL,GAAgBA,QAAhB;AACAQ,IAAAA,QAAQ,GAAGA,QAAQ,IAAI,EAAvB;AACA,UAAKC,eAAL,GAAuBD,QAAQ,CAACC,eAAhC;AAJ8B;AAK/B;AAED;;;;;;;;qCAIiB;AAAA;;AACf,UAAIC,IAAI,GAAG,KAAKV,QAAL,CAAcC,GAAd,CAAkB,UAACC,CAAD;AAAA,eAAO,MAAI,CAACS,wBAAL,CAA8BT,CAA9B,CAAP;AAAA,OAAlB,CAAX;AACA,UAAIU,MAAM,GAAG;AAACZ,QAAAA,QAAQ,EAAEU;AAAX,OAAb;AAEA,UAAG,KAAKD,eAAL,KAAyBI,SAA5B,EACED,MAAM,CAACH,eAAP,GAAyB,KAAKA,eAA9B;AAEF,aAAOG,MAAP;AACD;;;6CAEwBE,G,EAAK;AAC5B,UAAIC,EAAE,GAAG;AACPC,QAAAA,MAAM,EAAEF,GAAG,CAACE,MADL;AAEPC,QAAAA,IAAI,EAAEH,GAAG,CAACG;AAFH,OAAT;AAKA,UAAIC,MAAM,GAAGJ,GAAG,CAACK,eAAJ,EAAb;AACA,UAAIC,UAAU,GAAGN,GAAG,CAACO,cAAJ,EAAjB;;AACA,WAAK,IAAIC,QAAT,IAAqBF,UAArB,EAAiC;AAAEF,QAAAA,MAAM,CAACI,QAAD,CAAN,GAAmBF,UAAU,CAACE,QAAD,CAA7B;AAA0C;;AAE7E,UAAGC,MAAM,CAACC,IAAP,CAAYN,MAAZ,EAAoBO,MAApB,GAA6B,CAAhC,EACEV,EAAE,CAACG,MAAH,GAAYA,MAAZ;AAEF,aAAOH,EAAP;AACD;AAED;;;;;;;sCAIkB;AAChB,aAAO,EAAP;AACD;;;;EAtDiBlB,GAAG,CAAC6B,O;;AAyDxBC,OAAO,CAACpB,KAAR,GAAgBA,KAAhB","sourcesContent":["'use strict';\nconst rqs = require(\"./request\");\n\nvar sum_timeouts = ((requests) => {\n  return requests.map((r) => r.timeout).reduce((a, b) => a + b, 0);\n});\n\n/**\n * In many cases, it may be desirable to execute multiple requests at once. For example, when synchronizing the catalog of items in a periodical manner, you would have to execute a sequence of thousands of separate POST requests, which is very ineffective and may take a very long time to complete. Most notably, network latencies can make execution of such sequence very slow and even if executed in multiple parallel threads, there will still be unreasonable overhead caused by the HTTP(s). To avoid the mentioned problems, batch processing may be used, encapsulating a sequence of requests into a single HTTPS request.\n * Batch processing allows you to submit arbitrary sequence of requests and the batch may combine different types of requests arbitrarily as well.\n * Note that the status code of the batch request itself is 200 even if the individual requests result in error – you have to inspect the code values in the resulting array.\n  */\nclass Batch extends rqs.Request {\n\n  /**\n   * Construct the request\n   * @param {Request[]} requests - Array containing the requests.\n   * @param {Object} optional - Optional parameters given as an object with structure name of the parameter: value\n   * - Allowed parameters:\n   *     - *distinctRecomms*\n   *         - Type: boolean\n   *         - Description: Makes all the recommended items for a certain user distinct among multiple recommendation requests in the batch.\n   */\n  constructor(requests, optional) {\n    super('POST', '/batch/', sum_timeouts(requests), true);\n    this.requests = requests;\n    optional = optional || {};\n    this.distinctRecomms = optional.distinctRecomms;\n  }\n\n  /**\n   * Get body parameters\n   * @return {Object} The values of body parameters (name of parameter: value of the parameter)\n   */\n  bodyParameters() {\n    let reqs = this.requests.map((r) => this._request_to_batch_object(r));\n    let result = {requests: reqs};\n\n    if(this.distinctRecomms !== undefined)\n      result.distinctRecomms = this.distinctRecomms;\n    \n    return result;\n  }\n\n  _request_to_batch_object(req) {\n    let bo = {\n      method: req.method,\n      path: req.path\n    };\n\n    let params = req.queryParameters();\n    let bodyParams = req.bodyParameters();\n    for (var attrname in bodyParams) { params[attrname] = bodyParams[attrname]; }\n\n    if(Object.keys(params).length > 0)\n      bo.params = params;\n\n    return bo;\n  }\n\n  /**\n   * Get query parameters\n   * @return {Object} The values of query parameters (name of parameter: value of the parameter)\n   */\n  queryParameters() {\n    return {};\n  }\n}\n\nexports.Batch = Batch\n"]},"metadata":{},"sourceType":"script"}