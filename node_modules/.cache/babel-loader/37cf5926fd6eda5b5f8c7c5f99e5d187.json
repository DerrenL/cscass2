{"ast":null,"code":"import _regeneratorRuntime from \"D:\\\\material-kit-react-master\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _classCallCheck from \"D:\\\\material-kit-react-master\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"D:\\\\material-kit-react-master\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _inherits from \"D:\\\\material-kit-react-master\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _createSuper from \"D:\\\\material-kit-react-master\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";\nimport _asyncToGenerator from \"D:\\\\material-kit-react-master\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nvar _jsxFileName = \"D:\\\\material-kit-react-master\\\\src\\\\views\\\\UploadImage\\\\UploadImage.js\";\nimport React from \"react\";\nimport { Component } from 'react';\nimport axios from 'axios';\nimport $ from 'jquery';\n\nvar deepai = require('deepai');\n\ndeepai.setApiKey('d3e92cd6-0e8d-4921-aea4-6dd9d6f18b72'); // (async function() {\n//   var resp = await deepai.callStandardApi(\"nsfw-detector\", {\n//           image: \"https://mk0uploadvrcom4bcwhj.kinstacdn.com/wp-content/uploads/2018/01/Sex-Robots-300x220.jpg\",\n//   });\n//   //console.log(resp.output.nsfw_score);\n// })()\n\nfunction init() {\n  return _init.apply(this, arguments);\n}\n\nfunction _init() {\n  _init = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n    var resp;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return deepai.callStandardApi(\"nsfw-detector\", {\n              image: document.getElementById(\"wat\")\n            });\n\n          case 2:\n            resp = _context2.sent;\n            return _context2.abrupt(\"return\", resp.output.nsfw_score);\n\n          case 4:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n  return _init.apply(this, arguments);\n}\n\nvar UploadImage = /*#__PURE__*/function (_Component) {\n  _inherits(UploadImage, _Component);\n\n  var _super = _createSuper(UploadImage);\n\n  function UploadImage(props) {\n    var _this;\n\n    _classCallCheck(this, UploadImage);\n\n    _this = _super.call(this, props);\n\n    _this.singleFileChangedHandler = function (event) {\n      // console.log(event.target.files);\n      _this.setState({\n        selectedFile: event.target.files[0]\n      });\n    };\n\n    _this.singleFileUploadHandler = function (event) {\n      var data = new FormData(); // If file selected\n      //console.log(this.state.selectedFile);\n\n      if (_this.state.selectedFile) {\n        _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n          var test;\n          return _regeneratorRuntime.wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  _context.next = 2;\n                  return init();\n\n                case 2:\n                  test = _context.sent;\n\n                  if (test > 0.7) {\n                    console.log(\"cannot pass \" + test);\n\n                    _this.ocShowAlert('Please upload file safe for work', 'red');\n                  } else {\n                    console.log(\"can pass \" + test);\n                    data.append('profileImage', _this.state.selectedFile, _this.state.selectedFile.name);\n                    axios.post('/api/profile/profile-img-upload', data, {\n                      headers: {\n                        'accept': 'application/json',\n                        'Accept-Language': 'en-US,en;q=0.8',\n                        'Content-Type': \"multipart/form-data; boundary=\".concat(data._boundary)\n                      }\n                    }).then(function (response) {\n                      if (200 === response.status) {\n                        // If file size is larger than expected.\n                        if (response.data.error) {\n                          if ('LIMIT_FILE_SIZE' === response.data.error.code) {\n                            _this.ocShowAlert('\tMax size: 2MB', 'red');\n                          } else {\n                            console.log(response.data); // If not the given file type\n\n                            _this.ocShowAlert(response.data.error, 'red');\n                          }\n                        } else {\n                          // Success\n                          _this.fileName = response.data;\n                          console.log('fileName', _this.fileName);\n\n                          _this.ocShowAlert('File Uploaded', '#3089cf');\n                        }\n                      }\n                    })[\"catch\"](function (error) {\n                      // If another error\n                      _this.ocShowAlert(error, 'red'); //retry posting if network error(while loop)\n\n\n                      var counter = 0;\n\n                      while (counter < 2) {\n                        axios.post('/api/profile/profile-img-upload', data, {\n                          headers: {\n                            'accept': 'application/json',\n                            'Accept-Language': 'en-US,en;q=0.8',\n                            'Content-Type': \"multipart/form-data; boundary=\".concat(data._boundary)\n                          }\n                        });\n                        counter++;\n                        console.log(counter);\n                      }\n                    });\n                  }\n\n                case 4:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, _callee);\n        }))();\n      } else {\n        // if file not selected throw error\n        _this.ocShowAlert('Please upload file', 'red');\n      }\n    };\n\n    _this.updatetalentinfo = function (event) {\n      if (_this.state.talentName != \"\" && _this.state.talentAge != \"\" && _this.state.talentOccupation != \"\" && _this.state.talentDescription != \"\") {\n        axios.post('/api/profile/profile-details-upload', {\n          name: _this.state.talentName,\n          age: _this.state.talentAge,\n          occupation: _this.state.talentOccupation,\n          description: _this.state.talentDescription\n        });\n      } else {\n        window.alert('Please input nesscessary data!');\n      }\n    };\n\n    _this.ocShowAlert = function (message) {\n      var background = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '#3089cf';\n      var alertContainer = document.querySelector('#oc-alert-container'),\n          alertEl = document.createElement('div'),\n          textNode = document.createTextNode(message);\n      alertEl.setAttribute('class', 'oc-alert-pop-up');\n      $(alertEl).css('background', background);\n      alertEl.appendChild(textNode);\n      alertContainer.appendChild(alertEl);\n      setTimeout(function () {\n        $(alertEl).fadeOut('slow');\n        $(alertEl).remove();\n      }, 3000);\n    };\n\n    _this.state = {\n      selectedFile: null,\n      selectedFiles: null,\n      fileName: null,\n      talentName: null,\n      talentAge: null,\n      talentOccupation: null,\n      talentDescription: null\n    };\n    return _this;\n  }\n\n  _createClass(UploadImage, [{\n    key: \"render\",\n    value: function render() {\n      //console.log(this.state);\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"container\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 4\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        id: \"oc-alert-container\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 6\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"card border-light mb-3 mt-5\",\n        style: {\n          boxShadow: '0 5px 10px 2px rgba(195,192,192,.5)'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 5\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"card-header\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 10\n        }\n      }, /*#__PURE__*/React.createElement(\"h3\", {\n        style: {\n          color: '#555',\n          marginLeft: '12px'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 11\n        }\n      }, \"Single Image Upload\"), /*#__PURE__*/React.createElement(\"p\", {\n        className: \"text-muted\",\n        style: {\n          marginLeft: '12px'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 11\n        }\n      }, \"Upload Size: 250px x 250px ( Max 2MB )\")), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"card-body\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 10\n        }\n      }, /*#__PURE__*/React.createElement(\"p\", {\n        className: \"card-text\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 11\n        }\n      }, \"Please upload an image to send to AWS S3\"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"file\",\n        id: \"wat\",\n        onChange: this.singleFileChangedHandler,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 11\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"mt-5\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 10\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        className: \"btn btn-info\",\n        onClick: this.singleFileUploadHandler,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 12\n        }\n      }, \"Upload!\")), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"text\",\n        onChange: this.setState.talentName,\n        placeholder: \"Talent's Name..\",\n        id: \"talentname\",\n        required: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"number\",\n        onChange: this.setState({\n          talentAge: talentAge\n        }),\n        placeholder: \"Talent's Age..\",\n        id: \"talentage\",\n        required: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"text\",\n        onChange: this.setState({\n          talentOccupation: talentOccupation\n        }),\n        placeholder: \"Talent's Occupation..\",\n        id: \"talentoccupation\",\n        required: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(\"textarea\", {\n        id: \"talentdescription\",\n        onChange: this.setState({\n          talentDescription: talentDescription\n        }),\n        placeholder: \"More about talent..\",\n        required: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"mt-5\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        className: \"btn btn-info\",\n        onClick: this.updatetalentinfo,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 12\n        }\n      }, \"Submit talent information\")))));\n    }\n  }]);\n\n  return UploadImage;\n}(Component);\n\nexport default UploadImage;","map":{"version":3,"sources":["D:/material-kit-react-master/src/views/UploadImage/UploadImage.js"],"names":["React","Component","axios","$","deepai","require","setApiKey","init","callStandardApi","image","document","getElementById","resp","output","nsfw_score","UploadImage","props","singleFileChangedHandler","event","setState","selectedFile","target","files","singleFileUploadHandler","data","FormData","state","test","console","log","ocShowAlert","append","name","post","headers","_boundary","then","response","status","error","code","fileName","counter","updatetalentinfo","talentName","talentAge","talentOccupation","talentDescription","age","occupation","description","window","alert","message","background","alertContainer","querySelector","alertEl","createElement","textNode","createTextNode","setAttribute","css","appendChild","setTimeout","fadeOut","remove","selectedFiles","boxShadow","color","marginLeft"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { Component } from 'react';\nimport axios from 'axios';\nimport $ from 'jquery';\n\nconst deepai = require('deepai');\n\ndeepai.setApiKey('d3e92cd6-0e8d-4921-aea4-6dd9d6f18b72');\n\n// (async function() {\n//   var resp = await deepai.callStandardApi(\"nsfw-detector\", {\n//           image: \"https://mk0uploadvrcom4bcwhj.kinstacdn.com/wp-content/uploads/2018/01/Sex-Robots-300x220.jpg\",\n//   });\n//   //console.log(resp.output.nsfw_score);\n// })()\n\nasync function init() {\n  let resp;\n  resp = await deepai.callStandardApi(\"nsfw-detector\", {\n         image: document.getElementById(\"wat\"),\n });\n return resp.output.nsfw_score;\n //console.log(ha);\n //console.log(resp.output.nsfw_score);\n}\n\n\nclass UploadImage extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\t\tthis.state = {\n\t\t selectedFile: null,\n     selectedFiles: null,\n     fileName: null,\n     talentName:null,\n     talentAge:null,\n     talentOccupation:null,\n     talentDescription:null\n\t\t}\n     }\n     \n\n\t   singleFileChangedHandler = ( event ) => {\n\t\t  // console.log(event.target.files);\n\t\tthis.setState({\n\t\t selectedFile: event.target.files[0]\n\t\t});\n\t   };\n\n\t   singleFileUploadHandler = ( event ) => {\n    const data = new FormData();// If file selected\n    //console.log(this.state.selectedFile);\n\t\tif ( this.state.selectedFile ) {\n      (async () => {let test = await init()\n      if(test>0.7){\n        console.log(\"cannot pass \" + test);\n        this.ocShowAlert( 'Please upload file safe for work', 'red' );\n      }\n      else{\n        console.log(\"can pass \"+ test);\n        data.append( 'profileImage', this.state.selectedFile, this.state.selectedFile.name );\n        axios.post( '/api/profile/profile-img-upload', data, {\n          headers: {\n             'accept': 'application/json',\n             'Accept-Language': 'en-US,en;q=0.8',\n             'Content-Type': `multipart/form-data; boundary=${data._boundary}`,\n        }\n       })\n        .then( ( response ) => {if ( 200 === response.status ) {\n        // If file size is larger than expected.\n        if( response.data.error ) {\n         if ( 'LIMIT_FILE_SIZE' === response.data.error.code ) {\n          this.ocShowAlert( '\tMax size: 2MB', 'red' );\n         } \n         else {\n          console.log( response.data );// If not the given file type\n          this.ocShowAlert( response.data.error, 'red' );\n         }\n        } else {\n         // Success\n        this.fileName = response.data;\n         console.log( 'fileName', this.fileName);\n         this.ocShowAlert( 'File Uploaded', '#3089cf' );\n        }\n         }\n        }).catch( ( error ) => {\n        // If another error\n        this.ocShowAlert( error, 'red' );\n        //retry posting if network error(while loop)\n        var counter=0;\n        while(counter<2){\n        axios.post( '/api/profile/profile-img-upload', data, {\n          headers: {\n             'accept': 'application/json',\n             'Accept-Language': 'en-US,en;q=0.8',\n             'Content-Type': `multipart/form-data; boundary=${data._boundary}`,\n        }\n         });\n        counter++;\n        console.log(counter);\n        }\n        });\n      }\n    })()\n        \n\t\t\n\t\t} else {\n\t\t // if file not selected throw error\n\t\t this.ocShowAlert( 'Please upload file', 'red' );\n    }\n  };\n\n  updatetalentinfo = (event) => {\n    if((this.state.talentName!=\"\") && (this.state.talentAge!=\"\") && (this.state.talentOccupation!=\"\") && (this.state.talentDescription!=\"\"))\n    {\n      axios.post( '/api/profile/profile-details-upload', {\n        name: this.state.talentName,\n        age: this.state.talentAge,\n        occupation: this.state.talentOccupation,\n        description: this.state.talentDescription\n       })\n    }\n    else{\n      window.alert('Please input nesscessary data!');\n    }\n  }\n\n\n\t\t// ShowAlert Function\n \tocShowAlert = ( message, background = '#3089cf' ) => {\n\tlet alertContainer = document.querySelector( '#oc-alert-container' ),\n\t alertEl = document.createElement( 'div' ),\n\t textNode = document.createTextNode( message );\n\talertEl.setAttribute( 'class', 'oc-alert-pop-up' );\n\t$( alertEl ).css( 'background', background );\n\talertEl.appendChild( textNode );\n\talertContainer.appendChild( alertEl );\n\tsetTimeout( function () {\n\t $( alertEl ).fadeOut( 'slow' );\n\t $( alertEl ).remove();\n\t}, 3000 );\n   };\n\n\trender() {\n\t\t//console.log(this.state);\n\t\treturn(\n\t\t\t<div className=\"container\">\n\t\t\t\t {/* For Alert box*/}\n\t\t\t\t <div id=\"oc-alert-container\"></div>\n\t\t\t\t{/* Single File Upload*/}\n\t\t\t\t<div className=\"card border-light mb-3 mt-5\" style={{ boxShadow: '0 5px 10px 2px rgba(195,192,192,.5)' }}>\n      \t\t\t<div className=\"card-header\">\n       \t\t\t<h3 style={{ color: '#555', marginLeft: '12px' }}>Single Image Upload</h3>\n       \t\t\t<p className=\"text-muted\" style={{ marginLeft: '12px' }}>Upload Size: 250px x 250px ( Max 2MB )</p>\n      \t\t\t</div>\n      \t\t\t<div className=\"card-body\">\n       \t\t\t<p className=\"card-text\">Please upload an image to send to AWS S3</p>\n       \t\t\t<input type=\"file\" id=\"wat\" onChange={this.singleFileChangedHandler}/>\n      \t\t\t<div className=\"mt-5\">\n        \t\t\t<button className=\"btn btn-info\" onClick={this.singleFileUploadHandler}>Upload!</button>\n       \t\t\t</div>\n            <br></br>\n            <input type=\"text\" onChange={this.setState.talentName} placeholder=\"Talent's Name..\" id=\"talentname\" required></input>\n            <br></br>\n            <input type=\"number\" onChange={this.setState({talentAge})} placeholder=\"Talent's Age..\" id=\"talentage\" required></input>\n            <br></br>\n            <input type=\"text\" onChange={this.setState({talentOccupation})} placeholder=\"Talent's Occupation..\" id=\"talentoccupation\" required></input>\n            <br></br>\n            <textarea id=\"talentdescription\" onChange={this.setState({talentDescription})} placeholder=\"More about talent..\" required></textarea>\n            <div className=\"mt-5\">\n        \t\t\t<button className=\"btn btn-info\" onClick={this.updatetalentinfo}>Submit talent information</button>\n       \t\t\t</div>\n      \t\t\t</div>\n     \t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default UploadImage;\n"]},"metadata":{},"sourceType":"module"}