{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\khoo_\\\\OneDrive\\\\Desktop\\\\CSC\\\\cscass2\\\\cscass2\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _classCallCheck from\"C:\\\\Users\\\\khoo_\\\\OneDrive\\\\Desktop\\\\CSC\\\\cscass2\\\\cscass2\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\khoo_\\\\OneDrive\\\\Desktop\\\\CSC\\\\cscass2\\\\cscass2\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"C:\\\\Users\\\\khoo_\\\\OneDrive\\\\Desktop\\\\CSC\\\\cscass2\\\\cscass2\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\khoo_\\\\OneDrive\\\\Desktop\\\\CSC\\\\cscass2\\\\cscass2\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import _asyncToGenerator from\"C:\\\\Users\\\\khoo_\\\\OneDrive\\\\Desktop\\\\CSC\\\\cscass2\\\\cscass2\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import React from\"react\";import{Component}from\"react\";import axios from\"axios\";import $ from\"jquery\";var deepai=require(\"deepai\");deepai.setApiKey(\"d3e92cd6-0e8d-4921-aea4-6dd9d6f18b72\");// (async function() {\n//   var resp = await deepai.callStandardApi(\"nsfw-detector\", {\n//           image: \"https://mk0uploadvrcom4bcwhj.kinstacdn.com/wp-content/uploads/2018/01/Sex-Robots-300x220.jpg\",\n//   });\n//   //console.log(resp.output.nsfw_score);\n// })()\nfunction init(){return _init.apply(this,arguments);}function _init(){_init=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var resp;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return deepai.callStandardApi(\"nsfw-detector\",{image:document.getElementById(\"wat\")});case 2:resp=_context2.sent;return _context2.abrupt(\"return\",resp.output.nsfw_score);case 4:case\"end\":return _context2.stop();}}},_callee2);}));return _init.apply(this,arguments);}var UploadImage=/*#__PURE__*/function(_Component){_inherits(UploadImage,_Component);var _super=_createSuper(UploadImage);function UploadImage(props){var _this;_classCallCheck(this,UploadImage);_this=_super.call(this,props);_this.singleFileChangedHandler=function(event){// console.log(event.target.files);\n_this.setState({selectedFile:event.target.files[0]});};_this.singleFileUploadHandler=function(event){var data2={name:_this.state.talentName,age:_this.state.talentAge,occupation:_this.state.talentOccupation,description:_this.state.talentDescription};var data=new FormData();// If file selected\n//console.log(this.state.selectedFile);\nif(_this.state.selectedFile){_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var test;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return init();case 2:test=_context.sent;if(test>0.7){console.log(\"cannot pass \"+test);_this.ocShowAlert(\"Please upload file safe for work\",\"red\");}else{console.log(\"can pass \"+test);data.append(\"profileImage\",_this.state.selectedFile,_this.state.selectedFile.name);data.append(\"data2\",JSON.stringify(data2));axios.post(\"https://csc-test-app.herokuapp.com/profile-img-upload\",data,{headers:{accept:\"application/json\",\"Accept-Language\":\"en-US,en;q=0.8\",\"Content-Type\":\"multipart/form-data; boundary=\".concat(data._boundary)}}).then(function(response){if(200===response.status){// If file size is larger than expected.\nif(response.data.error){if(\"LIMIT_FILE_SIZE\"===response.data.error.code){_this.ocShowAlert(\"\tMax size: 2MB\",\"red\");}else{console.log(response.data);// If not the given file type\n_this.ocShowAlert(response.data.error,\"red\");}}else{// Success\n_this.fileName=response.data;console.log(\"fileName\",_this.fileName);_this.ocShowAlert(\"File Uploaded\",\"#3089cf\");}}}).catch(function(error){// If another error\n_this.ocShowAlert(error,\"red\");//retry posting if network error(while loop)\nvar counter=0;while(counter<2){axios.post(\"https://csc-test-app.herokuapp.com/profile-img-upload\",data,{headers:{accept:\"application/json\",\"Accept-Language\":\"en-US,en;q=0.8\",\"Content-Type\":\"multipart/form-data; boundary=\".concat(data._boundary)}});counter++;console.log(counter);}});}case 4:case\"end\":return _context.stop();}}},_callee);}))();}else{// if file not selected throw error\n_this.ocShowAlert(\"Please upload file\",\"red\");}};_this.handleTalentName=function(e){_this.setState({talentName:e.target.value});};_this.handleTalentAge=function(e){_this.setState({talentAge:e.target.value});};_this.handleTalentOccupation=function(e){_this.setState({talentOccupation:e.target.value});};_this.handleTalentDescription=function(e){_this.setState({talentDescription:e.target.value});};_this.ocShowAlert=function(message){var background=arguments.length>1&&arguments[1]!==undefined?arguments[1]:\"#3089cf\";var alertContainer=document.querySelector(\"#oc-alert-container\"),alertEl=document.createElement(\"div\"),textNode=document.createTextNode(message);alertEl.setAttribute(\"class\",\"oc-alert-pop-up\");$(alertEl).css(\"background\",background);alertEl.appendChild(textNode);alertContainer.appendChild(alertEl);setTimeout(function(){$(alertEl).fadeOut(\"slow\");$(alertEl).remove();},3000);};_this.state={selectedFile:null,selectedFiles:null,fileName:null,talentName:null,talentAge:null,talentOccupation:null,talentDescription:null};return _this;}_createClass(UploadImage,[{key:\"render\",value:function render(){//console.log(this.state);\nreturn/*#__PURE__*/React.createElement(\"div\",{className:\"container\"},/*#__PURE__*/React.createElement(\"div\",{id:\"oc-alert-container\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"card border-light mb-3 mt-5\",style:{boxShadow:\"0 5px 10px 2px rgba(195,192,192,.5)\"}},/*#__PURE__*/React.createElement(\"div\",{className:\"card-header\"},/*#__PURE__*/React.createElement(\"h3\",{style:{color:\"#555\",marginLeft:\"12px\"}},\"Talent Image And Details Upload\"),/*#__PURE__*/React.createElement(\"p\",{className:\"text-muted\",style:{marginLeft:\"12px\"}},\"Upload Size: 250px x 250px ( Max 2MB )\")),/*#__PURE__*/React.createElement(\"div\",{className:\"card-body\"},/*#__PURE__*/React.createElement(\"p\",{className:\"card-text\"},\"Please upload an image to send to AWS S3 and SQL Database\"),/*#__PURE__*/React.createElement(\"input\",{type:\"file\",id:\"wat\",onChange:this.singleFileChangedHandler}),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",onChange:this.handleTalentName,placeholder:\"Talent's Name..\",id:\"talentname\",required:true}),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"input\",{type:\"number\",onChange:this.handleTalentAge,placeholder:\"Talent's Age..\",id:\"talentage\",required:true}),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",onChange:this.handleTalentOccupation,placeholder:\"Talent's Occupation..\",id:\"talentoccupation\",required:true}),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"textarea\",{id:\"talentdescription\",onChange:this.handleTalentDescription,placeholder:\"More about talent..\",required:true}),/*#__PURE__*/React.createElement(\"div\",{className:\"mt-5\"},/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-info\",onClick:this.singleFileUploadHandler},\"Upload!\")))),/*#__PURE__*/React.createElement(\"div\",{className:\"mt-5\"},/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-info\",onClick:function onClick(event){return window.location.href=\"/afterlogin-page\";}},\"Home\")));}}]);return UploadImage;}(Component);export default UploadImage;","map":{"version":3,"sources":["C:/Users/khoo_/OneDrive/Desktop/CSC/cscass2/cscass2/src/views/UploadImage/UploadImage.js"],"names":["React","Component","axios","$","deepai","require","setApiKey","init","callStandardApi","image","document","getElementById","resp","output","nsfw_score","UploadImage","props","singleFileChangedHandler","event","setState","selectedFile","target","files","singleFileUploadHandler","data2","name","state","talentName","age","talentAge","occupation","talentOccupation","description","talentDescription","data","FormData","test","console","log","ocShowAlert","append","JSON","stringify","post","headers","accept","_boundary","then","response","status","error","code","fileName","catch","counter","handleTalentName","e","value","handleTalentAge","handleTalentOccupation","handleTalentDescription","message","background","alertContainer","querySelector","alertEl","createElement","textNode","createTextNode","setAttribute","css","appendChild","setTimeout","fadeOut","remove","selectedFiles","boxShadow","color","marginLeft","window","location","href"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport { Component } from \"react\";\r\nimport axios from \"axios\";\r\nimport $ from \"jquery\";\r\n\r\nconst deepai = require(\"deepai\");\r\n\r\ndeepai.setApiKey(\"d3e92cd6-0e8d-4921-aea4-6dd9d6f18b72\");\r\n\r\n// (async function() {\r\n//   var resp = await deepai.callStandardApi(\"nsfw-detector\", {\r\n//           image: \"https://mk0uploadvrcom4bcwhj.kinstacdn.com/wp-content/uploads/2018/01/Sex-Robots-300x220.jpg\",\r\n//   });\r\n//   //console.log(resp.output.nsfw_score);\r\n// })()\r\n\r\nasync function init() {\r\n  let resp;\r\n  resp = await deepai.callStandardApi(\"nsfw-detector\", {\r\n    image: document.getElementById(\"wat\"),\r\n  });\r\n  return resp.output.nsfw_score;\r\n  //console.log(ha);\r\n  //console.log(resp.output.nsfw_score);\r\n}\r\n\r\nclass UploadImage extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      selectedFile: null,\r\n      selectedFiles: null,\r\n      fileName: null,\r\n      talentName: null,\r\n      talentAge: null,\r\n      talentOccupation: null,\r\n      talentDescription: null,\r\n    };\r\n  }\r\n\r\n  singleFileChangedHandler = (event) => {\r\n    // console.log(event.target.files);\r\n    this.setState({\r\n      selectedFile: event.target.files[0],\r\n    });\r\n  };\r\n\r\n  singleFileUploadHandler = (event) => {\r\n    const data2 = {\r\n      name: this.state.talentName,\r\n      age: this.state.talentAge,\r\n      occupation: this.state.talentOccupation,\r\n      description: this.state.talentDescription,\r\n    };\r\n    const data = new FormData(); // If file selected\r\n    //console.log(this.state.selectedFile);\r\n    if (this.state.selectedFile) {\r\n      (async () => {\r\n        let test = await init();\r\n        if (test > 0.7) {\r\n          console.log(\"cannot pass \" + test);\r\n          this.ocShowAlert(\"Please upload file safe for work\", \"red\");\r\n        } else {\r\n          console.log(\"can pass \" + test);\r\n          data.append(\r\n            \"profileImage\",\r\n            this.state.selectedFile,\r\n            this.state.selectedFile.name\r\n          );\r\n          data.append(\"data2\", JSON.stringify(data2));\r\n          axios\r\n            .post(\r\n              \"https://csc-test-app.herokuapp.com/profile-img-upload\",\r\n              data,\r\n              {\r\n                headers: {\r\n                  accept: \"application/json\",\r\n                  \"Accept-Language\": \"en-US,en;q=0.8\",\r\n                  \"Content-Type\": `multipart/form-data; boundary=${data._boundary}`,\r\n                },\r\n              }\r\n            )\r\n            .then((response) => {\r\n              if (200 === response.status) {\r\n                // If file size is larger than expected.\r\n                if (response.data.error) {\r\n                  if (\"LIMIT_FILE_SIZE\" === response.data.error.code) {\r\n                    this.ocShowAlert(\"\tMax size: 2MB\", \"red\");\r\n                  } else {\r\n                    console.log(response.data); // If not the given file type\r\n                    this.ocShowAlert(response.data.error, \"red\");\r\n                  }\r\n                } else {\r\n                  // Success\r\n                  this.fileName = response.data;\r\n                  console.log(\"fileName\", this.fileName);\r\n                  this.ocShowAlert(\"File Uploaded\", \"#3089cf\");\r\n                }\r\n              }\r\n            })\r\n            .catch((error) => {\r\n              // If another error\r\n              this.ocShowAlert(error, \"red\");\r\n              //retry posting if network error(while loop)\r\n              var counter = 0;\r\n              while (counter < 2) {\r\n                axios.post(\r\n                  \"https://csc-test-app.herokuapp.com/profile-img-upload\",\r\n                  data,\r\n                  {\r\n                    headers: {\r\n                      accept: \"application/json\",\r\n                      \"Accept-Language\": \"en-US,en;q=0.8\",\r\n                      \"Content-Type\": `multipart/form-data; boundary=${data._boundary}`,\r\n                    },\r\n                  }\r\n                );\r\n                counter++;\r\n                console.log(counter);\r\n              }\r\n            });\r\n        }\r\n      })();\r\n    } else {\r\n      // if file not selected throw error\r\n      this.ocShowAlert(\"Please upload file\", \"red\");\r\n    }\r\n  };\r\n\r\n  handleTalentName = (e) => {\r\n    this.setState({ talentName: e.target.value });\r\n  };\r\n  handleTalentAge = (e) => {\r\n    this.setState({ talentAge: e.target.value });\r\n  };\r\n  handleTalentOccupation = (e) => {\r\n    this.setState({ talentOccupation: e.target.value });\r\n  };\r\n  handleTalentDescription = (e) => {\r\n    this.setState({ talentDescription: e.target.value });\r\n  };\r\n\r\n  // ShowAlert Function\r\n  ocShowAlert = (message, background = \"#3089cf\") => {\r\n    let alertContainer = document.querySelector(\"#oc-alert-container\"),\r\n      alertEl = document.createElement(\"div\"),\r\n      textNode = document.createTextNode(message);\r\n    alertEl.setAttribute(\"class\", \"oc-alert-pop-up\");\r\n    $(alertEl).css(\"background\", background);\r\n    alertEl.appendChild(textNode);\r\n    alertContainer.appendChild(alertEl);\r\n    setTimeout(function () {\r\n      $(alertEl).fadeOut(\"slow\");\r\n      $(alertEl).remove();\r\n    }, 3000);\r\n  };\r\n\r\n  render() {\r\n    //console.log(this.state);\r\n    return (\r\n      <div className=\"container\">\r\n        {/* For Alert box*/}\r\n        <div id=\"oc-alert-container\"></div>\r\n        {/* Single File Upload*/}\r\n        <div\r\n          className=\"card border-light mb-3 mt-5\"\r\n          style={{ boxShadow: \"0 5px 10px 2px rgba(195,192,192,.5)\" }}\r\n        >\r\n          <div className=\"card-header\">\r\n            <h3 style={{ color: \"#555\", marginLeft: \"12px\" }}>\r\n              Talent Image And Details Upload\r\n            </h3>\r\n            <p className=\"text-muted\" style={{ marginLeft: \"12px\" }}>\r\n              Upload Size: 250px x 250px ( Max 2MB )\r\n            </p>\r\n          </div>\r\n          <div className=\"card-body\">\r\n            <p className=\"card-text\">\r\n              Please upload an image to send to AWS S3 and SQL Database\r\n            </p>\r\n            <input\r\n              type=\"file\"\r\n              id=\"wat\"\r\n              onChange={this.singleFileChangedHandler}\r\n            />\r\n            <br></br>\r\n            <input\r\n              type=\"text\"\r\n              onChange={this.handleTalentName}\r\n              placeholder=\"Talent's Name..\"\r\n              id=\"talentname\"\r\n              required\r\n            ></input>\r\n            <br></br>\r\n            <input\r\n              type=\"number\"\r\n              onChange={this.handleTalentAge}\r\n              placeholder=\"Talent's Age..\"\r\n              id=\"talentage\"\r\n              required\r\n            ></input>\r\n            <br></br>\r\n            <input\r\n              type=\"text\"\r\n              onChange={this.handleTalentOccupation}\r\n              placeholder=\"Talent's Occupation..\"\r\n              id=\"talentoccupation\"\r\n              required\r\n            ></input>\r\n            <br></br>\r\n            <textarea\r\n              id=\"talentdescription\"\r\n              onChange={this.handleTalentDescription}\r\n              placeholder=\"More about talent..\"\r\n              required\r\n            ></textarea>\r\n            <div className=\"mt-5\">\r\n              <button\r\n                className=\"btn btn-info\"\r\n                onClick={this.singleFileUploadHandler}\r\n              >\r\n                Upload!\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className=\"mt-5\">\r\n          <button\r\n            className=\"btn btn-info\"\r\n            onClick={(event) => (window.location.href = \"/afterlogin-page\")}\r\n          >\r\n            Home\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default UploadImage;\r\n"]},"metadata":{},"sourceType":"module"}