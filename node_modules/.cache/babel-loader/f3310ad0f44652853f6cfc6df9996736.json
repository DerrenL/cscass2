{"ast":null,"code":"import _regeneratorRuntime from \"C:\\\\Users\\\\Eefrey\\\\Desktop\\\\cscass2\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _classCallCheck from \"C:\\\\Users\\\\Eefrey\\\\Desktop\\\\cscass2\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\Eefrey\\\\Desktop\\\\cscass2\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _inherits from \"C:\\\\Users\\\\Eefrey\\\\Desktop\\\\cscass2\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _createSuper from \"C:\\\\Users\\\\Eefrey\\\\Desktop\\\\cscass2\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\Eefrey\\\\Desktop\\\\cscass2\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nvar _jsxFileName = \"C:\\\\Users\\\\Eefrey\\\\Desktop\\\\cscass2\\\\src\\\\views\\\\UploadImage\\\\UploadImage.js\";\nimport React from \"react\";\nimport { Component } from \"react\";\nimport axios from \"axios\";\nimport $ from \"jquery\";\n\nvar deepai = require(\"deepai\");\n\ndeepai.setApiKey(\"d3e92cd6-0e8d-4921-aea4-6dd9d6f18b72\"); // (async function() {\n//   var resp = await deepai.callStandardApi(\"nsfw-detector\", {\n//           image: \"https://mk0uploadvrcom4bcwhj.kinstacdn.com/wp-content/uploads/2018/01/Sex-Robots-300x220.jpg\",\n//   });\n//   //console.log(resp.output.nsfw_score);\n// })()\n\nfunction init() {\n  return _init.apply(this, arguments);\n}\n\nfunction _init() {\n  _init = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n    var resp;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return deepai.callStandardApi(\"nsfw-detector\", {\n              image: document.getElementById(\"wat\")\n            });\n\n          case 2:\n            resp = _context2.sent;\n            return _context2.abrupt(\"return\", resp.output.nsfw_score);\n\n          case 4:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n  return _init.apply(this, arguments);\n}\n\nvar UploadImage = /*#__PURE__*/function (_Component) {\n  _inherits(UploadImage, _Component);\n\n  var _super = _createSuper(UploadImage);\n\n  function UploadImage(props) {\n    var _this;\n\n    _classCallCheck(this, UploadImage);\n\n    _this = _super.call(this, props);\n\n    _this.singleFileChangedHandler = function (event) {\n      // console.log(event.target.files);\n      _this.setState({\n        selectedFile: event.target.files[0]\n      });\n    };\n\n    _this.singleFileUploadHandler = function (event) {\n      var data2 = {\n        name: _this.state.talentName,\n        age: _this.state.talentAge,\n        occupation: _this.state.talentOccupation,\n        description: _this.state.talentDescription\n      };\n      var data = new FormData(); // If file selected\n      //console.log(this.state.selectedFile);\n\n      if (_this.state.selectedFile) {\n        _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n          var test;\n          return _regeneratorRuntime.wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  _context.next = 2;\n                  return init();\n\n                case 2:\n                  test = _context.sent;\n\n                  if (test > 0.7) {\n                    console.log(\"cannot pass \" + test);\n\n                    _this.ocShowAlert(\"Please upload file safe for work\", \"red\");\n                  } else {\n                    console.log(\"can pass \" + test);\n                    data.append(\"profileImage\", _this.state.selectedFile, _this.state.selectedFile.name);\n                    data.append(\"data2\", JSON.stringify(data2));\n                    axios.post(\"https://csc-test-app.herokuapp.com/profile-img-upload\", data, {\n                      headers: {\n                        accept: \"application/json\",\n                        \"Accept-Language\": \"en-US,en;q=0.8\",\n                        \"Content-Type\": \"multipart/form-data; boundary=\".concat(data._boundary)\n                      }\n                    }).then(function (response) {\n                      if (200 === response.status) {\n                        // If file size is larger than expected.\n                        if (response.data.error) {\n                          if (\"LIMIT_FILE_SIZE\" === response.data.error.code) {\n                            _this.ocShowAlert(\"\tMax size: 2MB\", \"red\");\n                          } else {\n                            console.log(response.data); // If not the given file type\n\n                            _this.ocShowAlert(response.data.error, \"red\");\n                          }\n                        } else {\n                          // Success\n                          _this.fileName = response.data;\n                          console.log(\"fileName\", _this.fileName);\n\n                          _this.ocShowAlert(\"File Uploaded\", \"#3089cf\");\n                        }\n                      }\n                    })[\"catch\"](function (error) {\n                      // If another error\n                      _this.ocShowAlert(error, \"red\"); //retry posting if network error(while loop)\n\n\n                      var counter = 0;\n\n                      while (counter < 2) {\n                        axios.post(\"https://csc-test-app.herokuapp.com/profile-img-upload\", data, {\n                          headers: {\n                            accept: \"application/json\",\n                            \"Accept-Language\": \"en-US,en;q=0.8\",\n                            \"Content-Type\": \"multipart/form-data; boundary=\".concat(data._boundary)\n                          }\n                        });\n                        counter++;\n                        console.log(counter);\n                      }\n                    });\n                  }\n\n                case 4:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, _callee);\n        }))();\n      } else {\n        // if file not selected throw error\n        _this.ocShowAlert(\"Please upload file\", \"red\");\n      }\n    };\n\n    _this.handleTalentName = function (e) {\n      _this.setState({\n        talentName: e.target.value\n      });\n    };\n\n    _this.handleTalentAge = function (e) {\n      _this.setState({\n        talentAge: e.target.value\n      });\n    };\n\n    _this.handleTalentOccupation = function (e) {\n      _this.setState({\n        talentOccupation: e.target.value\n      });\n    };\n\n    _this.handleTalentDescription = function (e) {\n      _this.setState({\n        talentDescription: e.target.value\n      });\n    };\n\n    _this.ocShowAlert = function (message) {\n      var background = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"#3089cf\";\n      var alertContainer = document.querySelector(\"#oc-alert-container\"),\n          alertEl = document.createElement(\"div\"),\n          textNode = document.createTextNode(message);\n      alertEl.setAttribute(\"class\", \"oc-alert-pop-up\");\n      $(alertEl).css(\"background\", background);\n      alertEl.appendChild(textNode);\n      alertContainer.appendChild(alertEl);\n      setTimeout(function () {\n        $(alertEl).fadeOut(\"slow\");\n        $(alertEl).remove();\n      }, 3000);\n    };\n\n    _this.state = {\n      selectedFile: null,\n      selectedFiles: null,\n      fileName: null,\n      talentName: null,\n      talentAge: null,\n      talentOccupation: null,\n      talentDescription: null\n    };\n    return _this;\n  }\n\n  _createClass(UploadImage, [{\n    key: \"render\",\n    value: function render() {\n      //console.log(this.state);\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"container\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        id: \"oc-alert-container\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 9\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"card border-light mb-3 mt-5\",\n        style: {\n          boxShadow: \"0 5px 10px 2px rgba(195,192,192,.5)\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"card-header\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"h3\", {\n        style: {\n          color: \"#555\",\n          marginLeft: \"12px\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 13\n        }\n      }, \"Talent Image And Details Upload\"), /*#__PURE__*/React.createElement(\"p\", {\n        className: \"text-muted\",\n        style: {\n          marginLeft: \"12px\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 13\n        }\n      }, \"Upload Size: 250px x 250px ( Max 2MB )\")), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"card-body\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"p\", {\n        className: \"card-text\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 13\n        }\n      }, \"Please upload an image to send to AWS S3 and SQL Database\"), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"file\",\n        id: \"wat\",\n        onChange: this.singleFileChangedHandler,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 181,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"text\",\n        onChange: this.handleTalentName,\n        placeholder: \"Talent's Name..\",\n        id: \"talentname\",\n        required: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"number\",\n        onChange: this.handleTalentAge,\n        placeholder: \"Talent's Age..\",\n        id: \"talentage\",\n        required: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 195,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"text\",\n        onChange: this.handleTalentOccupation,\n        placeholder: \"Talent's Occupation..\",\n        id: \"talentoccupation\",\n        required: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 210,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(\"textarea\", {\n        id: \"talentdescription\",\n        onChange: this.handleTalentDescription,\n        placeholder: \"More about talent..\",\n        required: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 211,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"mt-5\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 217,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        className: \"btn btn-info\",\n        onClick: this.singleFileUploadHandler,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 218,\n          columnNumber: 15\n        }\n      }, \"Upload!\")))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"mt-5\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 227,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        className: \"btn btn-info\",\n        onClick: function onClick(event) {\n          return window.location.href = \"/afterlogin-page\";\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 228,\n          columnNumber: 11\n        }\n      }, \"Home\")));\n    }\n  }]);\n\n  return UploadImage;\n}(Component);\n\nexport default UploadImage;","map":{"version":3,"sources":["C:/Users/Eefrey/Desktop/cscass2/src/views/UploadImage/UploadImage.js"],"names":["React","Component","axios","$","deepai","require","setApiKey","init","callStandardApi","image","document","getElementById","resp","output","nsfw_score","UploadImage","props","singleFileChangedHandler","event","setState","selectedFile","target","files","singleFileUploadHandler","data2","name","state","talentName","age","talentAge","occupation","talentOccupation","description","talentDescription","data","FormData","test","console","log","ocShowAlert","append","JSON","stringify","post","headers","accept","_boundary","then","response","status","error","code","fileName","counter","handleTalentName","e","value","handleTalentAge","handleTalentOccupation","handleTalentDescription","message","background","alertContainer","querySelector","alertEl","createElement","textNode","createTextNode","setAttribute","css","appendChild","setTimeout","fadeOut","remove","selectedFiles","boxShadow","color","marginLeft","window","location","href"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport { Component } from \"react\";\r\nimport axios from \"axios\";\r\nimport $ from \"jquery\";\r\n\r\nconst deepai = require(\"deepai\");\r\n\r\ndeepai.setApiKey(\"d3e92cd6-0e8d-4921-aea4-6dd9d6f18b72\");\r\n\r\n// (async function() {\r\n//   var resp = await deepai.callStandardApi(\"nsfw-detector\", {\r\n//           image: \"https://mk0uploadvrcom4bcwhj.kinstacdn.com/wp-content/uploads/2018/01/Sex-Robots-300x220.jpg\",\r\n//   });\r\n//   //console.log(resp.output.nsfw_score);\r\n// })()\r\n\r\nasync function init() {\r\n  let resp;\r\n  resp = await deepai.callStandardApi(\"nsfw-detector\", {\r\n    image: document.getElementById(\"wat\"),\r\n  });\r\n  return resp.output.nsfw_score;\r\n  //console.log(ha);\r\n  //console.log(resp.output.nsfw_score);\r\n}\r\n\r\nclass UploadImage extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      selectedFile: null,\r\n      selectedFiles: null,\r\n      fileName: null,\r\n      talentName: null,\r\n      talentAge: null,\r\n      talentOccupation: null,\r\n      talentDescription: null,\r\n    };\r\n  }\r\n\r\n  singleFileChangedHandler = (event) => {\r\n    // console.log(event.target.files);\r\n    this.setState({\r\n      selectedFile: event.target.files[0],\r\n    });\r\n  };\r\n\r\n  singleFileUploadHandler = (event) => {\r\n    const data2 = {\r\n      name: this.state.talentName,\r\n      age: this.state.talentAge,\r\n      occupation: this.state.talentOccupation,\r\n      description: this.state.talentDescription,\r\n    };\r\n    const data = new FormData(); // If file selected\r\n    //console.log(this.state.selectedFile);\r\n    if (this.state.selectedFile) {\r\n      (async () => {\r\n        let test = await init();\r\n        if (test > 0.7) {\r\n          console.log(\"cannot pass \" + test);\r\n          this.ocShowAlert(\"Please upload file safe for work\", \"red\");\r\n        } else {\r\n          console.log(\"can pass \" + test);\r\n          data.append(\r\n            \"profileImage\",\r\n            this.state.selectedFile,\r\n            this.state.selectedFile.name\r\n          );\r\n          data.append(\"data2\", JSON.stringify(data2));\r\n          axios\r\n            .post(\r\n              \"https://csc-test-app.herokuapp.com/profile-img-upload\",\r\n              data,\r\n              {\r\n                headers: {\r\n                  accept: \"application/json\",\r\n                  \"Accept-Language\": \"en-US,en;q=0.8\",\r\n                  \"Content-Type\": `multipart/form-data; boundary=${data._boundary}`,\r\n                },\r\n              }\r\n            )\r\n            .then((response) => {\r\n              if (200 === response.status) {\r\n                // If file size is larger than expected.\r\n                if (response.data.error) {\r\n                  if (\"LIMIT_FILE_SIZE\" === response.data.error.code) {\r\n                    this.ocShowAlert(\"\tMax size: 2MB\", \"red\");\r\n                  } else {\r\n                    console.log(response.data); // If not the given file type\r\n                    this.ocShowAlert(response.data.error, \"red\");\r\n                  }\r\n                } else {\r\n                  // Success\r\n                  this.fileName = response.data;\r\n                  console.log(\"fileName\", this.fileName);\r\n                  this.ocShowAlert(\"File Uploaded\", \"#3089cf\");\r\n                }\r\n              }\r\n            })\r\n            .catch((error) => {\r\n              // If another error\r\n              this.ocShowAlert(error, \"red\");\r\n              //retry posting if network error(while loop)\r\n              var counter = 0;\r\n              while (counter < 2) {\r\n                axios.post(\r\n                  \"https://csc-test-app.herokuapp.com/profile-img-upload\",\r\n                  data,\r\n                  {\r\n                    headers: {\r\n                      accept: \"application/json\",\r\n                      \"Accept-Language\": \"en-US,en;q=0.8\",\r\n                      \"Content-Type\": `multipart/form-data; boundary=${data._boundary}`,\r\n                    },\r\n                  }\r\n                );\r\n                counter++;\r\n                console.log(counter);\r\n              }\r\n            });\r\n        }\r\n      })();\r\n    } else {\r\n      // if file not selected throw error\r\n      this.ocShowAlert(\"Please upload file\", \"red\");\r\n    }\r\n  };\r\n\r\n  handleTalentName = (e) => {\r\n    this.setState({ talentName: e.target.value });\r\n  };\r\n  handleTalentAge = (e) => {\r\n    this.setState({ talentAge: e.target.value });\r\n  };\r\n  handleTalentOccupation = (e) => {\r\n    this.setState({ talentOccupation: e.target.value });\r\n  };\r\n  handleTalentDescription = (e) => {\r\n    this.setState({ talentDescription: e.target.value });\r\n  };\r\n\r\n  // ShowAlert Function\r\n  ocShowAlert = (message, background = \"#3089cf\") => {\r\n    let alertContainer = document.querySelector(\"#oc-alert-container\"),\r\n      alertEl = document.createElement(\"div\"),\r\n      textNode = document.createTextNode(message);\r\n    alertEl.setAttribute(\"class\", \"oc-alert-pop-up\");\r\n    $(alertEl).css(\"background\", background);\r\n    alertEl.appendChild(textNode);\r\n    alertContainer.appendChild(alertEl);\r\n    setTimeout(function () {\r\n      $(alertEl).fadeOut(\"slow\");\r\n      $(alertEl).remove();\r\n    }, 3000);\r\n  };\r\n\r\n  render() {\r\n    //console.log(this.state);\r\n    return (\r\n      <div className=\"container\">\r\n        {/* For Alert box*/}\r\n        <div id=\"oc-alert-container\"></div>\r\n        {/* Single File Upload*/}\r\n        <div\r\n          className=\"card border-light mb-3 mt-5\"\r\n          style={{ boxShadow: \"0 5px 10px 2px rgba(195,192,192,.5)\" }}\r\n        >\r\n          <div className=\"card-header\">\r\n            <h3 style={{ color: \"#555\", marginLeft: \"12px\" }}>\r\n              Talent Image And Details Upload\r\n            </h3>\r\n            <p className=\"text-muted\" style={{ marginLeft: \"12px\" }}>\r\n              Upload Size: 250px x 250px ( Max 2MB )\r\n            </p>\r\n          </div>\r\n          <div className=\"card-body\">\r\n            <p className=\"card-text\">\r\n              Please upload an image to send to AWS S3 and SQL Database\r\n            </p>\r\n            <input\r\n              type=\"file\"\r\n              id=\"wat\"\r\n              onChange={this.singleFileChangedHandler}\r\n            />\r\n            <br></br>\r\n            <input\r\n              type=\"text\"\r\n              onChange={this.handleTalentName}\r\n              placeholder=\"Talent's Name..\"\r\n              id=\"talentname\"\r\n              required\r\n            ></input>\r\n            <br></br>\r\n            <input\r\n              type=\"number\"\r\n              onChange={this.handleTalentAge}\r\n              placeholder=\"Talent's Age..\"\r\n              id=\"talentage\"\r\n              required\r\n            ></input>\r\n            <br></br>\r\n            <input\r\n              type=\"text\"\r\n              onChange={this.handleTalentOccupation}\r\n              placeholder=\"Talent's Occupation..\"\r\n              id=\"talentoccupation\"\r\n              required\r\n            ></input>\r\n            <br></br>\r\n            <textarea\r\n              id=\"talentdescription\"\r\n              onChange={this.handleTalentDescription}\r\n              placeholder=\"More about talent..\"\r\n              required\r\n            ></textarea>\r\n            <div className=\"mt-5\">\r\n              <button\r\n                className=\"btn btn-info\"\r\n                onClick={this.singleFileUploadHandler}\r\n              >\r\n                Upload!\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className=\"mt-5\">\r\n          <button\r\n            className=\"btn btn-info\"\r\n            onClick={(event) => (window.location.href = \"/afterlogin-page\")}\r\n          >\r\n            Home\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default UploadImage;\r\n"]},"metadata":{},"sourceType":"module"}