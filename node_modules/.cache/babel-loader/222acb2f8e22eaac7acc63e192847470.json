{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\Derren\\\\Desktop\\\\CSC\\\\material-kit-react-master\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _classCallCheck from\"C:\\\\Users\\\\Derren\\\\Desktop\\\\CSC\\\\material-kit-react-master\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\Derren\\\\Desktop\\\\CSC\\\\material-kit-react-master\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"C:\\\\Users\\\\Derren\\\\Desktop\\\\CSC\\\\material-kit-react-master\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\Derren\\\\Desktop\\\\CSC\\\\material-kit-react-master\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import _asyncToGenerator from\"C:\\\\Users\\\\Derren\\\\Desktop\\\\CSC\\\\material-kit-react-master\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import React from\"react\";import{Component}from'react';import axios from'axios';import $ from'jquery';var deepai=require('deepai');deepai.setApiKey('d3e92cd6-0e8d-4921-aea4-6dd9d6f18b72');// (async function() {\n//   var resp = await deepai.callStandardApi(\"nsfw-detector\", {\n//           image: \"https://mk0uploadvrcom4bcwhj.kinstacdn.com/wp-content/uploads/2018/01/Sex-Robots-300x220.jpg\",\n//   });\n//   //console.log(resp.output.nsfw_score);\n// })()\nfunction init(){return _init.apply(this,arguments);}function _init(){_init=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var resp;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return deepai.callStandardApi(\"nsfw-detector\",{image:document.getElementById(\"wat\")});case 2:resp=_context2.sent;return _context2.abrupt(\"return\",resp.output.nsfw_score);case 4:case\"end\":return _context2.stop();}}},_callee2);}));return _init.apply(this,arguments);}var UploadImage=/*#__PURE__*/function(_Component){_inherits(UploadImage,_Component);var _super=_createSuper(UploadImage);function UploadImage(props){var _this;_classCallCheck(this,UploadImage);_this=_super.call(this,props);_this.singleFileChangedHandler=function(event){// console.log(event.target.files);\n_this.setState({selectedFile:event.target.files[0]});};_this.singleFileUploadHandler=function(event){var data=new FormData();// If file selected\nvar array=[];//console.log(this.state.selectedFile);\nif(_this.state.selectedFile){_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var test;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return init();case 2:test=_context.sent;if(test>0.7){console.log(\"cannot pass\"+test);_this.ocShowAlert('Please upload file safe for work','red');}else{console.log(\"can pass\"+test);data.append('profileImage',_this.state.selectedFile,_this.state.selectedFile.name);axios.post('/api/profile/profile-img-upload',data,{headers:{'accept':'application/json','Accept-Language':'en-US,en;q=0.8','Content-Type':\"multipart/form-data; boundary=\".concat(data._boundary)}}).then(function(response){if(200===response.status){// If file size is larger than expected.\nif(response.data.error){if('LIMIT_FILE_SIZE'===response.data.error.code){_this.ocShowAlert('\tMax size: 2MB','red');}else{console.log(response.data);// If not the given file type\n_this.ocShowAlert(response.data.error,'red');}}else{// Success\nvar fileName=response.data;console.log('fileName',fileName);_this.ocShowAlert('File Uploaded','#3089cf');}}}).catch(function(error){// If another error\n_this.ocShowAlert(error,'red');//retry posting if network error(while loop)\nvar counter=0;while(counter<2){axios.post('/api/profile/profile-img-upload',data,{headers:{'accept':'application/json','Accept-Language':'en-US,en;q=0.8','Content-Type':\"multipart/form-data; boundary=\".concat(data._boundary)}});counter++;console.log(counter);}});}case 4:case\"end\":return _context.stop();}}},_callee);}))();}else{// if file not selected throw error\n_this.ocShowAlert('Please upload file','red');}};_this.ocShowAlert=function(message){var background=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'#3089cf';var alertContainer=document.querySelector('#oc-alert-container'),alertEl=document.createElement('div'),textNode=document.createTextNode(message);alertEl.setAttribute('class','oc-alert-pop-up');$(alertEl).css('background',background);alertEl.appendChild(textNode);alertContainer.appendChild(alertEl);setTimeout(function(){$(alertEl).fadeOut('slow');$(alertEl).remove();},3000);};_this.state={selectedFile:null,selectedFiles:null};return _this;}_createClass(UploadImage,[{key:\"render\",value:function render(){//console.log(this.state);\nreturn/*#__PURE__*/React.createElement(\"div\",{className:\"container\"},/*#__PURE__*/React.createElement(\"div\",{id:\"oc-alert-container\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"card border-light mb-3 mt-5\",style:{boxShadow:'0 5px 10px 2px rgba(195,192,192,.5)'}},/*#__PURE__*/React.createElement(\"div\",{className:\"card-header\"},/*#__PURE__*/React.createElement(\"h3\",{style:{color:'#555',marginLeft:'12px'}},\"Single Image Upload\"),/*#__PURE__*/React.createElement(\"p\",{className:\"text-muted\",style:{marginLeft:'12px'}},\"Upload Size: 250px x 250px ( Max 2MB )\")),/*#__PURE__*/React.createElement(\"div\",{className:\"card-body\"},/*#__PURE__*/React.createElement(\"p\",{className:\"card-text\"},\"Please upload an image to send to AWS S3\"),/*#__PURE__*/React.createElement(\"input\",{type:\"file\",id:\"wat\",onChange:this.singleFileChangedHandler}),/*#__PURE__*/React.createElement(\"div\",{className:\"mt-5\"},/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-info\",onClick:this.singleFileUploadHandler},\"Upload!\")))));}}]);return UploadImage;}(Component);export default UploadImage;","map":{"version":3,"sources":["C:/Users/Derren/Desktop/CSC/material-kit-react-master/src/views/UploadImage/UploadImage.js"],"names":["React","Component","axios","$","deepai","require","setApiKey","init","callStandardApi","image","document","getElementById","resp","output","nsfw_score","UploadImage","props","singleFileChangedHandler","event","setState","selectedFile","target","files","singleFileUploadHandler","data","FormData","array","state","test","console","log","ocShowAlert","append","name","post","headers","_boundary","then","response","status","error","code","fileName","catch","counter","message","background","alertContainer","querySelector","alertEl","createElement","textNode","createTextNode","setAttribute","css","appendChild","setTimeout","fadeOut","remove","selectedFiles","boxShadow","color","marginLeft"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { Component } from 'react';\nimport axios from 'axios';\nimport $ from 'jquery';\n\n\nconst deepai = require('deepai');\n\ndeepai.setApiKey('d3e92cd6-0e8d-4921-aea4-6dd9d6f18b72');\n\n// (async function() {\n//   var resp = await deepai.callStandardApi(\"nsfw-detector\", {\n//           image: \"https://mk0uploadvrcom4bcwhj.kinstacdn.com/wp-content/uploads/2018/01/Sex-Robots-300x220.jpg\",\n//   });\n//   //console.log(resp.output.nsfw_score);\n// })()\n\nasync function init() {\n  let resp;\n  resp = await deepai.callStandardApi(\"nsfw-detector\", {\n         image: document.getElementById(\"wat\"),\n });\n return resp.output.nsfw_score;\n //console.log(ha);\n //console.log(resp.output.nsfw_score);\n}\n\n\nclass UploadImage extends Component {\n\tconstructor( props ) {\n\t\tsuper( props );\n\t\tthis.state = {\n\t\t selectedFile: null,\n\t\t selectedFiles: null\n\t\t}\n\t   }\n\n\t   singleFileChangedHandler = ( event ) => {\n\t\t  // console.log(event.target.files);\n\t\tthis.setState({\n\t\t selectedFile: event.target.files[0]\n\t\t});\n\t   };\n\n\t   singleFileUploadHandler = ( event ) => {\n    const data = new FormData();// If file selected\n    const array=[];\n    //console.log(this.state.selectedFile);\n\t\tif ( this.state.selectedFile ) {\n      (async () => {let test = await init()\n      if(test>0.7){\n        console.log(\"cannot pass\" + test);\n        this.ocShowAlert( 'Please upload file safe for work', 'red' );\n      }\n      else{\n        console.log(\"can pass\"+ test);\n        data.append( 'profileImage', this.state.selectedFile, this.state.selectedFile.name );\n        axios.post( '/api/profile/profile-img-upload', data, {\n          headers: {\n             'accept': 'application/json',\n             'Accept-Language': 'en-US,en;q=0.8',\n             'Content-Type': `multipart/form-data; boundary=${data._boundary}`,\n        }\n       })\n        .then( ( response ) => {if ( 200 === response.status ) {\n        // If file size is larger than expected.\n        if( response.data.error ) {\n         if ( 'LIMIT_FILE_SIZE' === response.data.error.code ) {\n          this.ocShowAlert( '\tMax size: 2MB', 'red' );\n         } \n         else {\n          console.log( response.data );// If not the given file type\n          this.ocShowAlert( response.data.error, 'red' );\n         }\n        } else {\n         // Success\n         let fileName = response.data;\n         console.log( 'fileName', fileName );\n         this.ocShowAlert( 'File Uploaded', '#3089cf' );\n        }\n         }\n        }).catch( ( error ) => {\n        // If another error\n        this.ocShowAlert( error, 'red' );\n        //retry posting if network error(while loop)\n        var counter=0;\n        while(counter<2){\n        axios.post( '/api/profile/profile-img-upload', data, {\n          headers: {\n             'accept': 'application/json',\n             'Accept-Language': 'en-US,en;q=0.8',\n             'Content-Type': `multipart/form-data; boundary=${data._boundary}`,\n        }\n         });\n        counter++;\n        console.log(counter);\n        }\n        });\n      }\n    })()\n        \n\t\t\n\t\t} else {\n\t\t // if file not selected throw error\n\t\t this.ocShowAlert( 'Please upload file', 'red' );\n\t\t}};\n\n\t\t// ShowAlert Function\n \tocShowAlert = ( message, background = '#3089cf' ) => {\n\tlet alertContainer = document.querySelector( '#oc-alert-container' ),\n\t alertEl = document.createElement( 'div' ),\n\t textNode = document.createTextNode( message );\n\talertEl.setAttribute( 'class', 'oc-alert-pop-up' );\n\t$( alertEl ).css( 'background', background );\n\talertEl.appendChild( textNode );\n\talertContainer.appendChild( alertEl );\n\tsetTimeout( function () {\n\t $( alertEl ).fadeOut( 'slow' );\n\t $( alertEl ).remove();\n\t}, 3000 );\n   };\n\n\trender() {\n\t\t//console.log(this.state);\n\t\treturn(\n\t\t\t<div className=\"container\">\n\t\t\t\t {/* For Alert box*/}\n\t\t\t\t <div id=\"oc-alert-container\"></div>\n\t\t\t\t{/* Single File Upload*/}\n\t\t\t\t<div className=\"card border-light mb-3 mt-5\" style={{ boxShadow: '0 5px 10px 2px rgba(195,192,192,.5)' }}>\n      \t\t\t<div className=\"card-header\">\n       \t\t\t<h3 style={{ color: '#555', marginLeft: '12px' }}>Single Image Upload</h3>\n       \t\t\t<p className=\"text-muted\" style={{ marginLeft: '12px' }}>Upload Size: 250px x 250px ( Max 2MB )</p>\n      \t\t\t</div>\n      \t\t\t<div className=\"card-body\">\n       \t\t\t<p className=\"card-text\">Please upload an image to send to AWS S3</p>\n       \t\t\t<input type=\"file\" id=\"wat\" onChange={this.singleFileChangedHandler}/>\n      \t\t\t<div className=\"mt-5\">\n        \t\t\t<button className=\"btn btn-info\" onClick={this.singleFileUploadHandler}>Upload!</button>\n       \t\t\t</div>\n      \t\t\t</div>\n     \t\t\t</div>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nexport default UploadImage;\n"]},"metadata":{},"sourceType":"module"}